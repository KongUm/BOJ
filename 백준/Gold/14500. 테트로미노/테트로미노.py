N, M = map(int, input().split())
arr = [list(map(int, input().split())) for _ in range(N)]

tetris=[[(0,0),(0,1),(0,2),(0,3)],\
        [(0,0),(1,0),(2,0),(3,0)],\
        [(0,0),(1,0),(0,1),(1,1)],\
        [(0,0),(1,0),(2,0),(2,1)],\
        [(0,1),(1,1),(2,1),(2,0)],\
        [(0,0),(0,1),(1,1),(2,1)],\
        [(0,0),(0,1),(1,0),(2,0)],\
        [(0,0),(1,0),(1,1),(1,2)],\
        [(0,2),(1,1),(1,2),(1,0)],\
        [(0,0),(0,1),(0,2),(1,2)],\
        [(0,0),(1,0),(0,1),(0,2)],\
        [(0,0),(1,0),(1,1),(2,1)],\
        [(0,1),(1,1),(1,0),(2,0)],\
        [(1,0),(1,1),(0,1),(0,2)],\
        [(0,0),(0,1),(1,1),(1,2)],\
        [(0,1),(1,0),(1,1),(1,2)],\
        [(0,0),(0,1),(0,2),(1,1)],\
        [(0,0),(1,0),(1,1),(2,0)],\
        [(0,1),(1,1),(1,0),(2,1)]]
ans = 0
def Tetris(sy, sx):
    global ans
    for D in tetris:
        cnt, checker = 0, True
        for dy, dx in D:
            ny, nx = dy + sy, dx + sx
            if 0 <= ny < N and 0 <= nx < M:
                cnt += arr[ny][nx]
            else:
                checker = False
                break
        if checker:
            ans = max(ans, cnt)

for i in range(N):
    for j in range(M):
        Tetris(i, j)
print(ans)